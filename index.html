<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Scanner</title>
<style>
body {
    margin:0;
    font-family: Tahoma, Arial, sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    background:#c824E9;
    flex-direction:column;
}
.box {
    background:#fff;
    padding:20px;
    border-radius:20px;
    text-align:center;
    max-width:400px;
    width:95%;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}
button {
    padding:15px 20px;
    font-size:18px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    background:#FF6F00;
    color:#fff;
    margin-bottom:15px;
    transition:0.3s;
}
button:hover {
    opacity:0.85;
}
video {
    width:100%;
    border-radius:12px;
    display:none;
}
</style>
</head>
<body>
<div class="box">
    <h2>ماسح QR</h2>
    <button id="startScan">ابدأ المسح</button>
    <video id="video" autoplay></video>
    <p id="message" style="color:red;"></p>
</div>

<!-- CDN لمكتبة QR Scanner -->
<script src="https://unpkg.com/qr-scanner/qr-scanner.umd.min.js"></script>
<script>
const video = document.getElementById('video');
const button = document.getElementById('startScan');
const message = document.getElementById('message');

const scanner = new QrScanner(video, result => {
    window.location.href = result;  // تحويل تلقائي للرابط بعد قراءة QR
});

button.addEventListener('click', async () => {
    try {
        await scanner.start();   // يبدأ الماسح عند الضغط
        video.style.display = 'block';
        message.textContent = '';
    } catch(e) {
        message.textContent = 'لم يتم منح إذن الوصول للكاميرا. تحقق من إعدادات المتصفح.';
        console.error(e);
    }
});
</script>
</body>
</html>
